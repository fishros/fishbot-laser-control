# 网络模式使用说明

## 概述

FishBot激光雷达转接板支持UDP和TCP两种网络模式，用户可以根据实际需求选择合适的网络协议。

## 配置方法

### 1. 串口配置

通过串口连接到设备，发送以下命令进行配置：

```bash
# 设置为UDP模式
$net_mode=udp

# 设置为TCP模式  
$net_mode=tcp

# 读取当前配置
$command=read_config
```

### 2. 配置参数说明

| 参数 | 说明 | 默认值 | 示例 |
|------|------|--------|------|
| net_mode | 网络模式 | tcp | udp/tcp |
| server_ip | 服务器IP | 192.168.4.1 | 192.168.1.100 |
| server_port | 服务器端口 | tcp:8889 | tcp:3347/udp:3347 |

**注意**: 端口号显示格式为 `协议:端口号`，例如 `tcp:8889` 或 `udp:3347`

## 网络模式对比

### UDP模式
- **优点**: 传输速度快，延迟低
- **缺点**: 不保证数据完整性
- **适用场景**: 实时性要求高的应用

### TCP模式  
- **优点**: 数据可靠性高，自动重传
- **缺点**: 传输速度相对较慢
- **适用场景**: 对数据完整性要求高的应用
- **状态**: 默认模式

## 使用示例

### 配置UDP模式
```bash
# 设置网络模式为UDP
$net_mode=udp

# 设置服务器IP和端口
$server_ip=192.168.1.100
$server_port=3347

# 验证配置
$command=read_config
```

### 配置TCP模式
```bash
# 设置网络模式为TCP
$net_mode=tcp

# 设置服务器IP和端口
$server_ip=192.168.1.100  
$server_port=3347

# 验证配置
$command=read_config
```

## 注意事项

1. 修改网络模式后需要重启设备生效
2. 确保服务器端支持对应的协议
3. 防火墙需要开放对应端口
4. 网络模式配置会保存在NVS中，重启后仍然有效

## 故障排除

### 常见问题

1. **连接失败**: 检查IP地址和端口是否正确
2. **数据丢失**: UDP模式下可能出现数据丢失，建议切换到TCP模式
3. **配置不生效**: 确保发送的配置命令格式正确

### 调试方法

1. 使用`$command=read_config`查看当前配置
2. 检查串口输出的连接状态信息
3. 使用网络抓包工具分析数据传输 